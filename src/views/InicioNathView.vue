<template>   
  <div class="min-h-screen flex flex-col overflow-x-hidden" :class="theme === 'light' ? 'bg-gray-50 text-gray-900' : 'bg-black text-gray-100'">     
    
    <!-- NAVBAR CON ANIMACI√ìN -->     
    <nav class="flex justify-between items-center px-12 py-6 backdrop-blur-md shadow-lg border-b sticky top-0 z-50 transition-all duration-300" :class="theme === 'light' ? 'bg-white/90 border-gray-200' : 'bg-black/90 border-gray-800'">       
      <div class="flex items-center space-x-4">
        <!-- Logo del SENA -->
        <img 
          src="@/assets/logo-del-sena-01.png" 
          alt="Logo SENA" 
          class="h-16 w-auto hover:scale-105 transition-transform duration-300"
        />
        <div class="text-3xl font-black hover:text-[#3B9D30] transition-colors cursor-pointer" :class="theme === 'light' ? 'text-gray-800' : 'text-gray-100'">
          SENA<span class="text-[#3B9D30]">CLUB</span>
        </div>
      </div>       
      <div class="flex space-x-8">         
        <a href="#" class="hover:text-[#3B9D30] font-semibold text-lg transition-all duration-300 hover:scale-105" :class="theme === 'light' ? 'text-gray-700' : 'text-gray-300'">Centro de Servicios Financieros - Chapinero</a>       
      </div>       
      <div class="flex space-x-6 items-center">
        <!-- Bot√≥n de tema d√≠a/noche -->
        <button 
          @click="themeStore.toggleTheme()"
          class="hover:text-[#39A900] focus:outline-none text-2xl transition-all duration-300 hover:scale-110"
        >
          {{ theme === 'light' ? 'üåô' : '‚òÄÔ∏è' }}
        </button>         
        <RouterLink to="/signin" class="hover:text-[#3B9D30] font-semibold text-lg transition-all duration-300 hover:scale-105" :class="theme === 'light' ? 'text-gray-700' : 'text-gray-300'">Ingresar</RouterLink>         
        <RouterLink           
          to="/signup"           
          class="bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] text-white px-8 py-3 rounded-lg text-lg font-bold shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl relative overflow-hidden group"         
        >
          <span class="relative z-10">Registrarse</span>
          <div class="absolute inset-0 bg-white/20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"></div>         
        </RouterLink>       
      </div>     
    </nav>      
    
    <!-- MAIN CONTENT CON PART√çCULAS ANIMADAS -->     
    <main class="flex flex-1 justify-center items-center p-16 flex-wrap gap-20 text-center relative" :class="theme === 'light' ? 'bg-gradient-to-br from-gray-50 to-gray-100' : 'bg-gradient-to-br from-black to-black'">
      <!-- Part√≠culas flotantes -->
      <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
      </div>
      
      <div class="max-w-2xl z-10 relative">         
        <div class="backdrop-blur-sm border rounded-full px-6 py-2 mb-6 inline-block" :class="theme === 'light' ? 'bg-[#3B9D30]/10 border-[#3B9D30]/30' : 'bg-[#3B9D30]/20 border-[#3B9D30]/40'">
          <p class="text-lg text-[#3B9D30] font-bold animate-pulse">           
            ¬°√önete a la comunidad del Centro de Servicios Financieros!         
          </p>
        </div>         
        <h1 class="text-6xl font-black mb-8 leading-tight animate-fade-in-up" :class="theme === 'light' ? 'text-gray-800' : 'text-gray-100'">
          ¬°Bienvenidos a <span class="text-[#3B9D30] bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] bg-clip-text text-transparent animate-gradient">SenaClub</span>!
        </h1>         
        <p class="text-xl mb-10 leading-relaxed font-medium animate-fade-in-up animation-delay-300" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-300'">           
          El sitio online oficial para clubs dentro del Centro de Servicios Financieros SENA Chapinero.
          Conecta con tus compa√±eros, participa en actividades extracurriculares y enriquece tu formaci√≥n t√©cnica y tecnol√≥gica.         
        </p>         
        <RouterLink 
          to="/iniciosesion" 
          class="inline-flex items-center gap-3 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] text-white px-10 py-4 rounded-xl text-xl font-bold shadow-2xl transition-all duration-500 transform hover:scale-110 hover:shadow-green-500/25 group animate-bounce-gentle"
        >           
          <span>Explorar Clubes</span>
          <svg class="w-6 h-6 transition-transform group-hover:translate-x-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>      
        </RouterLink>       
      </div>        
      
      <!-- IMAGEN CON EFECTOS -->       
               
        <div class="relative bg-gradient-to-br from-[#3B9D30] to-[#2E7D2E] p-1 rounded-3xl shadow-2xl hover:shadow-3xl transition-all duration-500 transform hover:rotate-2">
          <img           
            src="@/assets/inicio.png.jpeg"           
            alt="Centro de Servicios Financieros SENA Chapinero"           
            class="w-full rounded-3xl transform transition-all duration-500 hover:scale-105"         
          />
      </div>     
    </main>      
    
    <!-- ESTAD√çSTICAS ANIMADAS -->
    <section class="py-12 border-y transition-colors duration-300" :class="theme === 'light' ? 'bg-white border-gray-200' : 'bg-black border-gray-800'">
      <div class="max-w-6xl mx-auto px-12">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
          <div class="group cursor-pointer">
            <div class="text-4xl font-black text-[#3B9D30] mb-2 transition-all group-hover:scale-110">+ Comunicaci√≥n</div>
            <p class="font-semibold" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">Toda la comunidad conectada en un mismo lugar</p>
          </div>
          <div class="group cursor-pointer">
            <div class="text-4xl font-black text-[#3B9D30] mb-2 transition-all group-hover:scale-110">+ Colaboraci√≥n</div>
            <p class="font-semibold" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">Aprendices unidos en clubs y actividades</p>
          </div>
          <div class="group cursor-pointer">
            <div class="text-4xl font-black text-[#3B9D30] mb-2 transition-all group-hover:scale-110">+ Informaci√≥n</div>
            <p class="font-semibold" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">Noticias y eventos al d√≠a del CSF Chapinero</p>
          </div>
          <div class="group cursor-pointer">
            <div class="text-4xl font-black text-[#3B9D30] mb-2 transition-all group-hover:scale-110">+ Interacci√≥n Estudiantil</div>
            <p class="font-semibold" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">Mayor participaci√≥n y v√≠nculos entre aprendices e instructores</p>
          </div>
        </div>
      </div>
    </section>

    <!-- SECCI√ìN NOTIFICACIONES -->
    <section 
      class="relative z-10 px-12 py-16 transition-colors duration-300" 
      :class="theme === 'light' ? 'bg-gradient-to-b from-white to-gray-50' : 'bg-gradient-to-b from-black to-black'"
    >
      <div class="max-w-7xl mx-auto relative z-10">
        <div class="text-center mb-12">
          <div class="flex justify-between items-center mb-8">
            <div class="flex-1">
              <h2 class="text-4xl font-black mb-4" :class="theme === 'light' ? 'text-gray-800' : 'text-gray-100'">
                Notificaciones <span class="text-[#3B9D30]">Recientes</span>
                <span v-if="notifications.length > 0" class="text-sm font-normal ml-2" :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'">
                  ({{ notifications.length }} {{ notifications.length === 1 ? 'notificaci√≥n' : 'notificaciones' }})
                </span>
              </h2>
              <div class="w-24 h-1 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] mx-auto mb-4"></div>
              <p class="text-lg" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-300'">
                Mantente informado de las √∫ltimas novedades
              </p>
            </div>
            
            <button 
              @click="loadNotifications"
              :disabled="isLoadingNotifications"
              class="flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ml-8"
              :class="[
                theme === 'light' 
                  ? 'bg-green-100 border-green-300 text-green-700 hover:bg-green-200' 
                  : 'bg-black border-green-700 text-green-300 hover:bg-gray-900',
                isLoadingNotifications ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'
              ]"
            >
              <svg 
                class="w-4 h-4 transition-transform"
                :class="{ 'animate-spin': isLoadingNotifications }"
                fill="none" 
                stroke="currentColor" 
                viewBox="0 0 24 24"
              >
                <path 
                  stroke-linecap="round" 
                  stroke-linejoin="round" 
                  stroke-width="2" 
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                />
              </svg>
              {{ isLoadingNotifications ? 'Actualizando...' : 'Actualizar' }}
            </button>
          </div>
        </div>
        
        <!-- Loading state -->
        <div v-if="isLoadingNotifications && notifications.length === 0" class="text-center py-8">
          <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#39A900]"></div>
          <p class="mt-2 text-gray-500">Cargando notificaciones...</p>
        </div>

        <!-- Notifications grid -->
        <div 
          v-else-if="notifications.length > 0"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
        >
          <article
            v-for="(notification, idx) in displayedNotifications"
            :key="notification._id || idx"
            class="cursor-pointer p-6 rounded-xl shadow-lg hover:scale-105 transition-all duration-300 border-l-4"
            :class="getNotificationClasses(notification)"
            @click="handleNotificationClick(notification)"
          >
            <div class="flex items-start justify-between mb-3">
              <span 
                class="inline-block px-3 py-1 text-xs rounded-full font-medium"
                :class="getNotificationBadgeClasses(notification.type)"
              >
                {{ getNotificationTypeLabel(notification.type) }}
              </span>
              <span class="text-xs" :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'">
                {{ formatTimestamp(notification.timestamp) }}
              </span>
            </div>
            
            <h3 
              class="text-xl font-bold mb-3"
              :class="getNotificationTitleClasses(notification.type)"
            >
              {{ notification.title }}
            </h3>
            
            <p class="mb-3 leading-relaxed" :class="theme === 'light' ? 'text-gray-700' : 'text-gray-300'">
              {{ notification.content }}
            </p>
            
            <div v-if="notification.userName" class="flex items-center text-xs" :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'">
              <span class="mr-1">üë§</span>
              <span>por {{ notification.userName }}</span>
            </div>
          </article>
        </div>
        
        <!-- Empty state -->
        <div
          v-else
          class="text-center py-16"
        >
          <div class="text-6xl mb-4">üì¢</div>
          <h3 class="text-xl font-semibold mb-2" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">
            No hay notificaciones
          </h3>
          <p class="text-gray-500">
            No hay notificaciones disponibles en este momento.
          </p>
        </div>

        <!-- Show more button -->
        <div v-if="notifications.length > maxNotificationsToShow" class="text-center mt-8">
          <button
            @click="showAllNotifications = !showAllNotifications"
            class="bg-[#39A900] text-white px-6 py-3 rounded-xl hover:bg-[#2d7a00] transition-all duration-200 shadow-lg hover:shadow-xl"
          >
            {{ showAllNotifications ? 'Mostrar menos' : `Ver todas (${notifications.length})` }}
          </button>
        </div>
      </div>
    </section>

    <!-- SECCI√ìN DE √öLTIMAS NOTICIAS -->
    <section class="py-20 relative overflow-hidden transition-colors duration-300" :class="theme === 'light' ? 'bg-gradient-to-b from-gray-50 to-white' : 'bg-gradient-to-b from-black to-black'">
      <div class="max-w-7xl mx-auto px-12 relative z-10">
        <div class="text-center mb-16">
          <div class="flex justify-between items-center mb-8">
            <div class="flex-1">
              <h2 class="text-5xl font-black mb-6 animate-fade-in-up" :class="theme === 'light' ? 'text-gray-800' : 'text-gray-100'">
                Noticias del <span class="text-[#3B9D30]">Centro</span>
                <span v-if="newsItems.length > 0" class="text-sm font-normal ml-2" :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'">
                  ({{ newsItems.length }} {{ newsItems.length === 1 ? 'noticia' : 'noticias' }})
                </span>
              </h2>
              <div class="w-24 h-1 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] mx-auto mb-6"></div>
              <p class="text-xl max-w-3xl mx-auto" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-300'">
                Mantente informado sobre actividades, eventos y novedades del Centro de Servicios Financieros Chapinero
              </p>
            </div>
            
            <button 
              @click="fetchNews"
              :disabled="isLoadingNews"
              class="flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ml-8"
              :class="[
                theme === 'light' 
                  ? 'bg-green-100 border-green-300 text-green-700 hover:bg-green-200' 
                  : 'bg-black border-green-700 text-green-300 hover:bg-gray-900',
                isLoadingNews ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'
              ]"
            >
              <svg 
                class="w-4 h-4 transition-transform"
                :class="{ 'animate-spin': isLoadingNews }"
                fill="none" 
                stroke="currentColor" 
                viewBox="0 0 24 24"
              >
                <path 
                  stroke-linecap="round" 
                  stroke-linejoin="round" 
                  stroke-width="2" 
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                />
              </svg>
              {{ isLoadingNews ? 'Actualizando...' : 'Actualizar' }}
            </button>
          </div>
        </div>

        <!-- Loading state -->
        <div v-if="isLoadingNews && newsItems.length === 0" class="text-center py-12">
          <div class="animate-spin rounded-full h-12 w-12 border-4 border-green-500 border-t-transparent mx-auto mb-4"></div>
          <p class="text-lg" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">Cargando noticias del centro...</p>
        </div>

        <!-- No news state -->
        <div v-else-if="newsItems.length === 0" class="text-center py-12">
          <div class="text-6xl mb-4">üì∞</div>
          <p class="text-lg mb-2" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">No hay noticias disponibles en este momento.</p>
          <p class="text-sm" :class="theme === 'light' ? 'text-gray-500' : 'text-gray-500'">¬°Vuelve pronto para conocer las √∫ltimas novedades del centro!</p>
        </div>

        <!-- News grid -->
        <div v-else class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <article 
            v-for="news in newsItems.slice(0, 6)" 
            :key="news._id"
            class="group rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 border overflow-hidden"
            :class="[
              theme === 'light' 
                ? 'bg-white border-gray-100 hover:border-[#3B9D30]/30' 
                : 'bg-black border-gray-800 hover:border-[#3B9D30]/30'
            ]"
          >
            <!-- Indicador de noticia nueva -->
            <div 
              v-if="isRecentNews(news.createdAt)"
              class="absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-lg animate-pulse z-10"
            >
              ¬°NUEVO!
            </div>
            
            <!-- News header with author info -->
            <div class="p-6 pb-4">
              <div class="flex items-center space-x-3 mb-4">
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-[#3B9D30] to-[#2E7D2E] flex items-center justify-center text-white font-bold text-sm shadow-lg">
                  {{ getAuthorInitials(news.author || '') }}
                </div>
                <div>
                  <p class="font-semibold text-sm" :class="theme === 'light' ? 'text-gray-800' : 'text-gray-200'">
                    {{ getAuthorName(news.author || '') }}
                  </p>
                  <div class="flex items-center space-x-2">
                    <span class="text-xs px-2 py-1 rounded-full bg-[#3B9D30]/10 text-[#3B9D30] font-medium">
                      Centro SF Chapinero
                    </span>
                    <span v-if="news.createdAt" class="text-xs" :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'">
                      {{ formatDate(news.createdAt) }}
                    </span>
                  </div>
                </div>
              </div>

              <!-- News title -->
              <h3 class="text-xl font-bold mb-3 group-hover:text-[#3B9D30] transition-colors leading-tight line-clamp-2" :class="theme === 'light' ? 'text-gray-800' : 'text-gray-200'">
                {{ news.title }}
              </h3>

              <!-- News content -->
              <p class="text-sm leading-relaxed line-clamp-3" :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'">
                {{ news.content }}
              </p>
            </div>

            <!-- News footer -->
            <div class="px-6 pb-6">
              <div class="flex justify-between items-center pt-4 border-t" :class="theme === 'light' ? 'border-gray-100' : 'border-gray-800'">
                <button class="text-[#3B9D30] font-semibold text-sm hover:underline transition-colors">
                  Leer m√°s ‚Üí
                </button>
                <div v-if="news.updatedAt && news.updatedAt !== news.createdAt" class="text-xs" :class="theme === 'light' ? 'text-gray-400' : 'text-gray-500'">
                  ‚úèÔ∏è Actualizado
                </div>
              </div>
            </div>
          </article>
        </div>

        <!-- Ver m√°s noticias button -->
        <div v-if="newsItems.length > 6" class="text-center mt-12">
          <RouterLink 
            to="/news"
            class="inline-flex items-center gap-3 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] text-white px-8 py-4 rounded-xl text-lg font-bold shadow-xl transition-all duration-300 transform hover:scale-105 hover:shadow-green-500/25 group"
          >
            <span>Ver todas las noticias</span>
            <svg class="w-5 h-5 transition-transform group-hover:translate-x-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </RouterLink>
        </div>
      </div>
    </section>
    
    <!-- SECCI√ìN CLUBES CON ANIMACIONES AVANZADAS -->     
  <section
    class="px-12 py-20 relative overflow-hidden transition-colors duration-300"
    :class="theme === 'light' ? 'bg-gradient-to-b from-gray-50 to-white' : 'bg-gradient-to-b from-black to-black'"
  >
    <!-- Patr√≥n de fondo -->
    <div class="absolute inset-0 bg-pattern opacity-5"></div>
    
    <div class="max-w-7xl mx-auto relative z-10">
      <div class="text-center mb-16">
        <h2
          class="text-5xl font-black mb-6 animate-fade-in-up"
          :class="theme === 'light' ? 'text-gray-800' : 'text-gray-100'"
        >
          Nuestros <span class="text-[#3B9D30]">Clubes</span> Especializados
        </h2>
        <div class="w-24 h-1 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] mx-auto mb-6"></div>
        <p
          class="text-xl max-w-3xl mx-auto"
          :class="theme === 'light' ? 'text-gray-600' : 'text-gray-300'"
        >
          Actividades extracurriculares dise√±adas para complementar tu formaci√≥n en servicios financieros y fortalecer tu perfil profesional
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Tarjeta Finanzas -->
        <div
          class="group border-2 p-10 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:border-[#3B9D30] relative overflow-hidden"
          :class="theme === 'light' ? 'bg-white border-gray-200' : 'bg-black border-gray-800'"
        >
          <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>         
          <div
            class="w-20 h-20 bg-gradient-to-br from-[#3B9D30] to-[#2E7D2E] rounded-2xl flex items-center justify-center mb-8 group-hover:rotate-12 transition-all duration-500 mx-auto shadow-xl"
          >
            <span class="text-white text-3xl font-bold">üí∞</span>
          </div>
          <h3
            class="text-3xl font-black mb-6 text-center group-hover:text-[#3B9D30] transition-colors"
            :class="theme === 'light' ? 'text-gray-800' : 'text-gray-200'"
          >
            Finanzas
          </h3>
          <p
            class="leading-relaxed text-lg text-center mb-6"
            :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'"
          >
            Club de Banca y Finanzas, Seguros, Gesti√≥n Contable, An√°lisis de Cr√©dito y Educaci√≥n Financiera.
          </p>
          
          <!-- Texto adicional -->
          <transition name="fade">
            <div
              v-if="showFinanzas"
              class="text-center text-base mb-4"
              :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'"
            >
              Aqu√≠ los aprendices trabajan en proyectos pr√°cticos, como simulaci√≥n de cr√©ditos, casos de contabilidad y estrategias de inversi√≥n.
            </div>
          </transition>
          
          <div class="text-center">
            <button
              class="text-[#3B9D30] font-bold hover:underline"
              @click="showFinanzas = !showFinanzas"
            >
              {{ showFinanzas ? 'Ver menos ‚Üë' : 'Ver m√°s ‚Üí' }}
            </button>
          </div>
        </div>
        
        <!-- Tarjeta Tecnolog√≠a -->
        <div
          class="group border-2 p-10 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:border-[#3B9D30] relative overflow-hidden"
          :class="theme === 'light' ? 'bg-white border-gray-200' : 'bg-black border-gray-800'"
        >
          <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>         
          <div
            class="w-20 h-20 bg-gradient-to-br from-[#3B9D30] to-[#2E7D2E] rounded-2xl flex items-center justify-center mb-8 group-hover:rotate-12 transition-all duration-500 mx-auto shadow-xl"
          >
            <span class="text-white text-3xl font-bold">üíª</span>
          </div>
          <h3
            class="text-3xl font-black mb-6 text-center group-hover:text-[#3B9D30] transition-colors"
            :class="theme === 'light' ? 'text-gray-800' : 'text-gray-200'"
          >
            Tecnolog√≠a
          </h3>
          <p
            class="leading-relaxed text-lg text-center mb-6"
            :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'"
          >
            Desarrollo de Software, Ciberseguridad, An√°lisis de Datos, Innovaci√≥n Tecnol√≥gica.
          </p>
          
          <!-- Texto adicional -->
          <transition name="fade">
            <div
              v-if="showTecnologia"
              class="text-center text-base mb-4"
              :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'"
            >
              Espacio para aprender nuevas tecnolog√≠as, participar en hackatones y aplicar soluciones digitales a retos financieros reales.
            </div>
          </transition>
          
          <div class="text-center">
            <button
              class="text-[#3B9D30] font-bold hover:underline"
              @click="showTecnologia = !showTecnologia"
            >
              {{ showTecnologia ? 'Ver menos ‚Üë' : 'Ver m√°s ‚Üí' }}
            </button>
          </div>
        </div>
        
        <!-- Tarjeta Liderazgo -->
        <div
          class="group border-2 p-10 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:border-[#3B9D30] relative overflow-hidden"
          :class="theme === 'light' ? 'bg-white border-gray-200' : 'bg-black border-gray-800'"
        >
          <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E] transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>         
          <div
            class="w-20 h-20 bg-gradient-to-br from-[#3B9D30] to-[#2E7D2E] rounded-2xl flex items-center justify-center mb-8 group-hover:rotate-12 transition-all duration-500 mx-auto shadow-xl"
          >
            <span class="text-white text-3xl font-bold">üéØ</span>
          </div>
          <h3
            class="text-3xl font-black mb-6 text-center group-hover:text-[#3B9D30] transition-colors"
            :class="theme === 'light' ? 'text-gray-800' : 'text-gray-200'"
          >
            Liderazgo
          </h3>
          <p
            class="leading-relaxed text-lg text-center mb-6"
            :class="theme === 'light' ? 'text-gray-600' : 'text-gray-400'"
          >
            Emprendimiento, Liderazgo Juvenil, Servicio al Cliente, Comunicaci√≥n Asertiva y Proyecci√≥n Social.
          </p>
          
          <!-- Texto adicional -->
          <transition name="fade">
            <div
              v-if="showLiderazgo"
              class="text-center text-base mb-4"
              :class="theme === 'light' ? 'text-gray-500' : 'text-gray-400'"
            >
              Los participantes desarrollan habilidades blandas, organizan eventos y fortalecen el liderazgo juvenil en el CSF Chapinero.
            </div>
          </transition>
          
          <div class="text-center">
            <button
              class="text-[#3B9D30] font-bold hover:underline"
              @click="showLiderazgo = !showLiderazgo"
            >
              {{ showLiderazgo ? 'Ver menos ‚Üë' : 'Ver m√°s ‚Üí' }}
            </button>
          </div>
        </div>
      </div>
    </div>     
  </section>


    <!-- TESTIMONIOS -->
    <section class="py-20 bg-[#3B9D30] text-white relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-[#3B9D30] to-[#2E7D2E]"></div>
      <div class="max-w-4xl mx-auto px-12 text-center relative z-10">
        <h2 class="text-4xl font-black mb-12">Testimonios de Nuestros Aprendices</h2>
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
          <p class="text-xl italic mb-6">"Los clubes del Centro de Servicios Financieros me permitieron aplicar lo aprendido en clase y desarrollar habilidades de liderazgo. Ahora trabajo en un banco gracias a las competencias que adquir√≠."</p>
          <div class="flex items-center justify-center gap-4">
            <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
              <span class="text-2xl">üë©‚Äçüíº</span>
            </div>
            <div>
              <p class="font-bold">Mar√≠a Fernanda Rodr√≠guez</p>
              <p class="text-white/80">T√©cnica en Operaciones Bancarias - Egresada 2024</p>
            </div>
          </div>
        </div>
      </div>
    </section>      
    
    <!-- FOOTER MEJORADO -->     
    <footer class="relative overflow-hidden transition-colors duration-300" :class="theme === 'light' ? 'bg-gray-900 text-white' : 'bg-black text-gray-300'">
      <div class="absolute inset-0" :class="theme === 'light' ? 'bg-gradient-to-br from-gray-900 to-black' : 'bg-gradient-to-br from-gray-950 via-black to-gray-900'"></div>
      <div class="max-w-6xl mx-auto px-12 py-16 relative z-10">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-12">
          <div>
            <div class="text-3xl font-black mb-4">SENA<span class="text-[#3B9D30]">CLUB</span></div>
            <p class="mb-6" :class="theme === 'light' ? 'text-gray-300' : 'text-gray-400'">Centro de Servicios Financieros SENA Chapinero. Formando profesionales integrales para el sector financiero colombiano.</p>
            <div class="flex space-x-4">
              <div class="w-10 h-10 bg-[#3B9D30] rounded-full flex items-center justify-center hover:scale-110 transition-transform cursor-pointer">
                <span class="text-white font-bold">f</span>
              </div>
              <div class="w-10 h-10 bg-[#3B9D30] rounded-full flex items-center justify-center hover:scale-110 transition-transform cursor-pointer">
                <span class="text-white font-bold">I</span>
              </div>
              <div class="w-10 h-10 bg-[#3B9D30] rounded-full flex items-center justify-center hover:scale-110 transition-transform cursor-pointer">
                <span class="text-white font-bold">Y</span>
              </div>
            </div>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-4">Enlaces R√°pidos</h3>
            <div class="space-y-2">
              <a href="#" class="block hover:text-[#3B9D30] transition-colors" :class="theme === 'light' ? 'text-gray-300' : 'text-gray-400'">Sobre el Centro</a>
              <a href="#" class="block hover:text-[#3B9D30] transition-colors" :class="theme === 'light' ? 'text-gray-300' : 'text-gray-400'">Clubes Estudiantiles</a>
              <a href="#" class="block hover:text-[#3B9D30] transition-colors" :class="theme === 'light' ? 'text-gray-300' : 'text-gray-400'">Programas de Formaci√≥n</a>
              <a href="#" class="block hover:text-[#3B9D30] transition-colors" :class="theme === 'light' ? 'text-gray-300' : 'text-gray-400'">Bienestar Estudiantil</a>
            </div>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-4">Cont√°ctanos</h3>
            <div class="space-y-2" :class="theme === 'light' ? 'text-gray-300' : 'text-gray-400'">
              <p>üìß chapinero@sena.edu.co</p>
              <p>üì± (601) 546 1500</p>
              <p>üìç Carrera 13 No. 32-76, Chapinero, Bogot√° D.C.</p>
              <p>üåê Centro de Servicios Financieros</p>
            </div>
          </div>
        </div>
        <div class="border-t pt-8 text-center" :class="theme === 'light' ? 'border-gray-700' : 'border-gray-600'">
          <p :class="theme === 'light' ? 'text-gray-400' : 'text-gray-500'">¬© 2025 SenaClub - Centro de Servicios Financieros SENA Chapinero. Todos los derechos reservados.</p>
        </div>
      </div>     
    </footer>   
  </div> 
</template>  

<script setup lang="ts">
import { ref, onMounted, onUnmounted, computed } from 'vue'
import { useThemeStore } from '@/stores/theme'
import { storeToRefs } from 'pinia'

// Types
interface Notification {
  _id?: string
  title: string
  content: string
  type: 'info' | 'warning' | 'alert'
  timestamp: string
  userName?: string
  isRead?: boolean
}

const themeStore = useThemeStore()
const { theme } = storeToRefs(themeStore)

// Controladores para cada club
const showFinanzas = ref(false)
const showTecnologia = ref(false)
const showLiderazgo = ref(false)

// News data
const newsItems = ref([])
const isLoadingNews = ref(false)
const refreshInterval = ref(null)

// Notifications data
const notifications = ref([])
const isLoadingNotifications = ref(false)
const showAllNotifications = ref(false)
const maxNotificationsToShow = 6

// Computed
const displayedNotifications = computed(() => {
  return showAllNotifications.value 
    ? notifications.value 
    : notifications.value.slice(0, maxNotificationsToShow)
})

const API_URL = 'https://backend-senaclub-xtrt.onrender.com/api/news'

onMounted(async () => {
  // ------------------ NOTIFICACIONES ------------------
  await loadNotifications()

  // ------------------ NOTICIAS desde API ------------------
  await fetchNews()
  
  // Iniciar auto-refresh cada 60 segundos (1 minuto)
  startAutoRefresh()
})

onUnmounted(() => {
  if (refreshInterval.value) {
    clearInterval(refreshInterval.value)
  }
})

// ============ NOTIFICACIONES ============
const loadNotifications = async () => {
  try {
    isLoadingNotifications.value = true
    
    // Cargar notificaciones persistentes del localStorage
    const persistentNotifications = loadPersistentNotifications()
    
    // Aqu√≠ podr√≠as hacer una llamada a la API para obtener notificaciones del servidor
    // const serverNotifications = await fetchServerNotifications()
    
    // Combinar y ordenar notificaciones por fecha (m√°s recientes primero)
    const allNotifications = [...persistentNotifications]
    allNotifications.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime())
    
    notifications.value = allNotifications
  } catch (error) {
    console.error('Error al cargar notificaciones:', error)
    notifications.value = []
  } finally {
    isLoadingNotifications.value = false
  }
}

const loadPersistentNotifications = () => {
  try {
    const raw = localStorage.getItem('persistent_notifications')
    return raw ? JSON.parse(raw) : []
  } catch (error) {
    console.error('Error al parsear notificaciones del localStorage:', error)
    return []
  }
}

const handleNotificationClick = (notification) => {
  // Marcar notificaci√≥n como le√≠da
  if (!notification.isRead) {
    notification.isRead = true
    updatePersistentNotifications()
  }
  
  // Aqu√≠ podr√≠as agregar l√≥gica adicional, como navegar a una p√°gina espec√≠fica
  console.log('Notificaci√≥n clickeada:', notification)
}

const updatePersistentNotifications = () => {
  try {
    localStorage.setItem('persistent_notifications', JSON.stringify(notifications.value))
  } catch (error) {
    console.error('Error al guardar notificaciones en localStorage:', error)
  }
}

const formatTimestamp = (timestamp) => {
  try {
    const date = new Date(timestamp)
    const now = new Date()
    const diffInMs = now.getTime() - date.getTime()
    const diffInHours = Math.floor(diffInMs / (1000 * 60 * 60))
    const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24))
    
    if (diffInHours < 1) return 'Hace unos minutos'
    if (diffInHours < 24) return `Hace ${diffInHours} horas`
    if (diffInDays === 1) return 'Hace 1 d√≠a'
    if (diffInDays < 7) return `Hace ${diffInDays} d√≠as`
    
    return date.toLocaleDateString('es-CO')
  } catch (error) {
    return timestamp
  }
}

const getNotificationTypeLabel = (type) => {
  const labels = {
    info: 'Informaci√≥n',
    warning: 'Advertencia',
    alert: 'Alerta'
  }
  return labels[type] || 'Notificaci√≥n'
}

const getNotificationClasses = (notification) => {
  const baseClasses = theme.value === 'light' 
    ? 'bg-white bg-opacity-80' 
    : 'bg-gray-900 bg-opacity-50'
  
  const typeClasses = {
    info: 'border-l-green-400 hover:bg-green-50',
    warning: 'border-l-yellow-400 hover:bg-yellow-50',
    alert: 'border-l-red-400 hover:bg-red-50'
  }
  
  const darkTypeClasses = {
    info: 'border-l-green-400 hover:bg-green-900 hover:bg-opacity-20',
    warning: 'border-l-yellow-400 hover:bg-yellow-900 hover:bg-opacity-20',
    alert: 'border-l-red-400 hover:bg-red-900 hover:bg-opacity-20'
  }
  
  const themeTypeClasses = theme.value === 'light' ? typeClasses : darkTypeClasses
  return `${baseClasses} ${themeTypeClasses[notification.type] || ''}`
}

const getNotificationTitleClasses = (type) => {
  const typeClasses = {
    info: 'text-green-700',
    warning: 'text-yellow-700',
    alert: 'text-red-700'
  }
  
  const darkTypeClasses = {
    info: 'text-green-400',
    warning: 'text-yellow-400',
    alert: 'text-red-400'
  }
  
  const themeTypeClasses = theme.value === 'light' ? typeClasses : darkTypeClasses
  return themeTypeClasses[type] || 'text-[#39A900]'
}

const getNotificationBadgeClasses = (type) => {
  const typeClasses = {
    info: 'bg-green-100 text-green-800',
    warning: 'bg-yellow-100 text-yellow-800',
    alert: 'bg-red-100 text-red-800'
  }
  
  const darkTypeClasses = {
    info: 'bg-green-900 bg-opacity-30 text-green-400',
    warning: 'bg-yellow-900 bg-opacity-30 text-yellow-400',
    alert: 'bg-red-900 bg-opacity-30 text-red-400'
  }
  
  const themeTypeClasses = theme.value === 'light' ? typeClasses : darkTypeClasses
  return themeTypeClasses[type] || 'bg-gray-100 text-gray-800'
}

// ============ NOTICIAS ============
const fetchNews = async () => {
  try {
    isLoadingNews.value = true
    
    // Hacer llamada a la API con timestamp para evitar cach√©
    const response = await fetch(`${API_URL}?timestamp=${Date.now()}`, {
      method: 'GET',
      headers: {
        'Cache-Control': 'no-cache',
        'Pragma': 'no-cache'
      }
    })
    
    if (!response.ok) {
      throw new Error(`Error: ${response.status}`)
    }
    
    const data = await response.json()
    
    // Ordenar las noticias por fecha de creaci√≥n (m√°s recientes primero)
    const sortedData = data.sort((a, b) => {
      const dateA = new Date(a.createdAt || 0).getTime()
      const dateB = new Date(b.createdAt || 0).getTime()
      return dateB - dateA // Orden descendente (m√°s recientes primero)
    })
    
    newsItems.value = sortedData
    
    // Tambi√©n guardar en localStorage como respaldo
    localStorage.setItem('persistent_news', JSON.stringify(sortedData))
    
    console.log('Noticias cargadas desde API (ordenadas por fecha):', sortedData)
    
  } catch (error) {
    console.error('Error al obtener noticias desde API:', error)
    
    // Como fallback, intentar cargar desde localStorage
    const rawNews = localStorage.getItem('persistent_news')
    try {
      const persistedNews = rawNews ? JSON.parse(rawNews) : []
      // Tambi√©n ordenar las noticias del localStorage por si acaso
      const sortedPersistedNews = persistedNews.sort((a, b) => {
        const dateA = new Date(a.createdAt || 0).getTime()
        const dateB = new Date(b.createdAt || 0).getTime()
        return dateB - dateA
      })
      newsItems.value = sortedPersistedNews
      console.log('Cargadas noticias desde localStorage como fallback (ordenadas)')
    } catch {
      newsItems.value = []
      console.log('No se pudieron cargar noticias')
    }
  } finally {
    isLoadingNews.value = false
  }
}

const startAutoRefresh = () => {
  // Auto-refresh cada 60 segundos
  refreshInterval.value = setInterval(() => {
    fetchNews()
  }, 60000)
}

const formatDate = (dateString) => {
  if (!dateString) return 'Fecha desconocida'
  
  try {
    const date = new Date(dateString)
    return date.toLocaleDateString('es-ES', {
      day: '2-digit',
      month: '2-digit',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    })
  } catch (error) {
    return 'Fecha desconocida'
  }
}

const isRecentNews = (dateString) => {
  if (!dateString) return false
  
  try {
    const newsDate = new Date(dateString)
    const now = new Date()
    const diffHours = (now.getTime() - newsDate.getTime()) / (1000 * 60 * 60)
    
    // Considerar como "nuevo" si tiene menos de 24 horas
    return diffHours < 24
  } catch (error) {
    return false
  }
}

const getAuthorInitials = (author) => {
  if (!author || author === 'undefined' || author === 'null') return '??'
  const names = author.trim().split(' ')
  return names.length >= 2 ? (names[0][0] + names[1][0]).toUpperCase() : author.substring(0, 2).toUpperCase()
}

const getAuthorName = (author) => {
  if (!author || author === 'undefined' || author === 'null') return 'Coordinaci√≥n Acad√©mica'
  return author
}
</script>  

<style scoped> 
@keyframes fadeIn {   
  from { opacity: 0; transform: translateY(30px); }   
  to { opacity: 1; transform: translateY(0); } 
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(40px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(2deg); }
}

@keyframes bounceGentle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

@keyframes particleFloat {
  0%, 100% { 
    transform: translateY(0px) translateX(0px) rotate(0deg); 
    opacity: 0.3;
  }
  33% { 
    transform: translateY(-30px) translateX(20px) rotate(120deg); 
    opacity: 0.6;
  }
  66% { 
    transform: translateY(-10px) translateX(-20px) rotate(240deg); 
    opacity: 0.9;
  }
}

.animate-fade-in {   
  animation: fadeIn 1.2s ease-out forwards; 
}

.animate-fade-in-up {
  animation: fadeInUp 0.8s ease-out forwards;
}

.animation-delay-300 {
  animation-delay: 0.3s;
  opacity: 0;
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-bounce-gentle {
  animation: bounceGentle 2s ease-in-out infinite;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #3B9D30;
  border-radius: 50%;
  animation: particleFloat 8s linear infinite;
}

.particle-1 {
  top: 20%;
  left: 10%;
  animation-delay: 0s;
}

.particle-2 {
  top: 60%;
  left: 20%;
  animation-delay: 2s;
}

.particle-3 {
  top: 80%;
  right: 30%;
  animation-delay: 4s;
}

.particle-4 {
  top: 30%;
  right: 20%;
  animation-delay: 6s;
}

.particle-5 {
  top: 70%;
  left: 70%;
  animation-delay: 1s;
}

.bg-pattern {
  background-image: radial-gradient(circle at 1px 1px, rgba(59, 157, 48, 0.3) 1px, transparent 0);
  background-size: 20px 20px;
}

.shadow-3xl {
  box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25);
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* Custom shadow for enhanced hover effect */
.hover\:shadow-3xl:hover {
  box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25);
}
</style>